jQuery(document).ready(function(b){function w(){jQuery("#sales-slider").slider().on("slideStop",function(a){d.addNumericRefinement("sales",">=",a.value[0]).search();d.addNumericRefinement("sales","<=",a.value[1]).search()});jQuery("#downloaded-slider").slider().on("slideStop",function(a){d.addNumericRefinement("downloaded",">=",a.value[0]).search();d.addNumericRefinement("downloaded","<=",a.value[1]).search()});jQuery("#price-slider").slider().on("slideStop",function(a){d.addNumericRefinement("price",
">=",a.value[0]).search();d.addNumericRefinement("price","<=",a.value[1]).search()});jQuery("#num_ratings-slider").slider().on("slideStop",function(a){d.addNumericRefinement("num_ratings",">=",a.value[0]).search();d.addNumericRefinement("num_ratings","<=",a.value[1]).search()});jQuery("#rating-slider").slider().on("slideStop",function(a){d.addNumericRefinement("rating",">=",a.value[0]).search();d.addNumericRefinement("rating","<=",a.value[1]).search()});jQuery('input[type="checkbox"]').checkbox()}
function n(a){return 1E9<=a?(a/1E9).toFixed(0)+"G":1E6<=a?(a/1E6).toFixed(0)+"M":1E3<=a?(a/1E3).toFixed(0)+"K":a}var t=function(){var a={};a.width=Math.round(.8*b(window).width());a.height=Math.round(.8*b(window).height());return a}(),q=["awpt",""+document.location.hostname+""],p=[{name:"downloaded",title:"Downloads",disjunctive:!0,type:"slider"},{name:"num_ratings",title:"Votes",disjunctive:!0,type:"slider"},{name:"rating",title:"Rating",disjunctive:!0,type:"slider"},{name:"last_update_range",title:"Last update",
disjunctive:!0,sortFunction:r,topListIfRefined:!0}],m=b("#q"),x=b("#hits"),y=b("#stats"),u=b("#facets"),v=b("#pagination"),z=Hogan.compile(b("#hit-template").text()),A=Hogan.compile(b("#stats-template").text()),B=Hogan.compile(b("#facet-template").text()),C=Hogan.compile(b("#slider-template").text()),D=Hogan.compile(b("#pagination-template").text()),r=algoliasearch("A2MUMFS8E7","0d46864b6df02baf8ab1f1fd0ecd9349"),q={hitsPerPage:10,maxValuesPerFacet:10,facets:b.map(p,function(a){return a.disjunctive?
null:a.name}),disjunctiveFacets:b.map(p,function(a){return a.disjunctive?a.name:null}),analyticsTags:q,ignorePlurals:!0},d=algoliasearchHelper(r,"wp_themes",q);m.on("keyup change",function(){var a=m.val();a.trim()?(b("#input-loop").removeClass("glyphicon-search"),b("#input-loop").addClass("glyphicon-remove")):(b("#input-loop").addClass("glyphicon-search"),b("#input-loop").removeClass("glyphicon-remove"));d.setQuery(a).search()}).focus();d.on("change",function(a){var b;b="#q="+encodeURIComponent(a.query);
b+="&page="+(a.page+1);for(var c in a.facetsRefinements)b+="&"+encodeURIComponent(c)+"="+encodeURIComponent(a.facetsRefinements[c]);for(var d in a.disjunctiveFacetsRefinements)for(var e in a.disjunctiveFacetsRefinements[d])b+="&"+encodeURIComponent(d)+"="+encodeURIComponent(a.disjunctiveFacetsRefinements[d][e]);location.replace(b)});d.on("error",function(a){"AlgoliaSearchError"==a.name&&alert("Oops, something is not quite right.\nThis might be due to an outdated version of the plugin, in that case you must simply update the Addendio Plugin.\nOtherwise we will be happy to help, just get in touch at support@addendio.com")});
d.on("result",function(a,b){var c=a.nbHits,g;g=",";c=(c+"").split(".");c[0]=c[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1"+g);g={nbHits:c.join("."),processingTimeMS:a.processingTimeMS,nbHits_plural:1!==a.nbHits};y.html(A.render(g));g="";for(c=0;c<a.hits.length;++c){a.hits[c].rating_label_color="success";3>a.hits[c].rating&&(a.hits[c].rating_label_color="danger");a.hits[c].num_ratings_label_color="success";10>a.hits[c].num_ratings&&(a.hits[c].num_ratings_label_color="danger");for(var e=a.hits[c],f=a.hits[c].rating,
h="",l=0;l<Math.round(f);++l)h+='<span class="glyphicon glyphicon-star" style="color:#f5874f;"></span>';e.star_rating=h;a.hits[c].last_update_label_color="info";"> 2 years"==a.hits[c].last_update_range&&(a.hits[c].last_update_label_color="danger");a.hits[c].donate_link_flag=!0;"None"===a.hits[c].donate_link&&(a.hits[c].donate_link_flag=!1);a.hits[c].homepage_flag=!0;"None"===a.hits[c].homepage&&(a.hits[c].homepage_flag=!1);a.hits[c].description_flag=!0;"None"==a.hits[c].author&&(a.hits[c].description_flag=
!1);a.hits[c].page_width=t.width;a.hits[c].page_height=t.height;a.hits[c].downloaded=n(a.hits[c].downloaded);g+=z.render(a.hits[c])}0===a.hits.length&&(g='<p id="no-hits">Try and change your parameters... </p><p id="no-hits">if you think this is a bug you can reach us here support@addendio.com </p>');x.html(g);if(0===a.hits.length)u.empty();else{g=[];for(c=0;c<p.length;++c)if(e=p[c],h=a.getFacetByName(e.name)){f={};f.facet=e.name;f.title=e.title;f.type=e.type;if("slider"===e.type)f.min=h.stats.min,
f.max=h.stats.max,l=b.getNumericRefinement(e.name,">=")||h.stats.min,h=b.getNumericRefinement(e.name,"<=")||h.stats.max,l=Math.min(f.max,Math.max(f.min,l)),h=Math.min(f.max,Math.max(f.min,h)),f.values=[l,h],f.label_values=[n(l),n(h)],f.label_min=n(l),f.label_max=n(h);else{var l=[],k;for(k in h.data)l.push({label:k,value:k,count:h.data[k],refined:d.isRefined(e.name,k)});h=e.sortFunction||E;e.topListIfRefined&&(h=F(h));l.sort(h);f.values=l.slice(0,10);f.has_other_values=10<l.length;f.other_values=l.slice(10);
f.disjunctive=e.disjunctive}f.facet_tooltip=app_awpt_vars[e.name+"_facet_tooltip"];g.push(f)}k="";for(c=0;c<g.length;++c)e=g[c],k=e.type&&"slider"===e.type?k+C.render(e):k+B.render(e);u.html(k)}if(0===a.hits.length)v.empty();else{k=[];5<a.page&&(k.push({current:!1,number:1}),k.push({current:!1,number:"...",disabled:!0}));for(g=a.page-5;g<a.page+5;++g)0>g||g>=a.nbPages||k.push({current:a.page===g,number:g+1});a.page+5<a.nbPages&&(k.push({current:!1,number:"...",disabled:!0}),k.push({current:!1,number:a.nbPages}));
v.html(D.render({pages:k,prev_page:0<a.page?a.page:!1,next_page:a.page+1<a.nbPages?a.page+2:!1}))}w()});(function(){var a=location.hash;if(!a||0===a.length)return!0;a=a.split("&");if(!a||0===a.length)return!0;var b=decodeURIComponent(a[0].split("=")[1]);m.val(b);d.setQuery(b);for(b=2;b<a.length;b++){var c=a[b].split("=");decodeURIComponent(c[0]);c=decodeURIComponent(c[1]);d.toggleRefine(facets,c,!1)}a=decodeURIComponent(a[1].split("=")[1])-1;d.setCurrentPage(a)})();d.search();jQuery(document).on("click",
".show-more, .show-less",function(){jQuery(this).closest("ul").find(".show-more").toggle();jQuery(this).closest("ul").find(".show-less").toggle()});jQuery(document).on("click",".toggleRefine",function(){d.toggleRefine(b(this).data("facet"),b(this).data("value")).search()});jQuery(document).on("click",".gotoPage",function(){d.setCurrentPage(+jQuery(this).data("page")-1).search();window.scrollTo(0,0)});jQuery(document).on("click",".sortBy",function(){jQuery(this).closest(".btn-group").find(".sort-by").text(b(this).text());
d.setIndex("wp_themes"+b(this).data("index-suffix")).search()});jQuery(document).on("click","#input-loop",function(){d.clearRefinements();m.val("").change()});jQuery(document).on("click","#reset-query",function(){d.clearRefinements();m.val("").change()});jQuery(document).on("click","#start-over",function(){d.clearRefinements();m.val("").change()});b("#facets").on("mouseenter mouseleave",".button-checkbox",function(a){b(this).parent().find(".facet_link").toggleClass("hover")});b("#facets").on("mouseenter mouseleave",
".facet_link",function(a){b(this).parent().find(".button-checkbox button.btn").toggleClass("hover")});var E=function(a,b){return b.count-a.count},r=function(a,b){return a.value.localeCompare(b.value)},F=function(a){return function(b,c){if(b.refined!==c.refined){if(b.refined)return-1;if(c.refined)return 1}return a(b,c)}};jQuery("#q").focus(function(){b(this).data("placeholder",b(this).attr("placeholder"));b(this).attr("placeholder","")});jQuery("#q").blur(function(){b(this).attr("placeholder",b(this).data("placeholder"))})});
